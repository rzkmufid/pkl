<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <style media="print">
    /* Menyembunyikan elemen-elemen yang tidak ingin dicetak */
    body * {
      visibility: hidden;
    }
    .print-table,
    .print-table * {
      visibility: visible;
    }
    .print-table {
      position: absolute;
      left: 0;
      top: 0;
    }
  </style>

  <body>
    <div id="menu">
      <input type="text" id="searchInput" placeholder="Cari..." />
      <button id="printBtn">Cetak</button>
    </div>

    <table id="myTable">
      <thead>
        <tr>
          <th>Nama</th>
          <th>Umur</th>
          <th>Kota</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data akan ditambahkan secara dinamis melalui jQuery -->
      </tbody>
      <tfoot>
        <!-- Navigasi halaman akan ditambahkan secara dinamis melalui jQuery -->
      </tfoot>
    </table>

    <script>
      $(document).ready(function () {
        var data = [
          { nama: "John Doe", umur: 25, kota: "Jakarta" },
          { nama: "Jane Smith", umur: 30, kota: "Bandung" },
          { nama: "David Johnson", umur: 35, kota: "Surabaya" },
          { nama: "John Doe", umur: 25, kota: "Jakarta" },
          { nama: "Jane Smith", umur: 30, kota: "Bandung" },
          { nama: "David Johnson", umur: 35, kota: "Surabaya" },
          // Data lainnya
        ];

        var itemsPerPage = 5; // Jumlah item per halaman
        var currentPage = 1; // Halaman saat ini

        function displayTableData() {
          var startIndex = (currentPage - 1) * itemsPerPage;
          var endIndex = startIndex + itemsPerPage;
          var tableData = data.slice(startIndex, endIndex);

          // Menghapus data sebelumnya dari tabel
          $("#myTable tbody").empty();

          // Menambahkan data ke tabel
          $.each(tableData, function (index, item) {
            var row =
              "<tr>" +
              "<td>" +
              item.nama +
              "</td>" +
              "<td>" +
              item.umur +
              "</td>" +
              "<td>" +
              item.kota +
              "</td>" +
              "</tr>";
            $("#myTable tbody").append(row);
          });

          // Memperbarui navigasi halaman
          updatePagination();
        }

        function updatePagination() {
          var totalPages = Math.ceil(data.length / itemsPerPage);

          // Menghapus navigasi halaman sebelumnya
          $("#myTable tfoot").empty();

          // Membuat navigasi halaman
          var pagination = "<tr rowspan='3'> <td>";
          for (var i = 1; i <= totalPages; i++) {
            pagination +=
              '<button class="page-btn" data-page="' +
              i +
              '">' +
              i +
              "</button>";
          }
          pagination += "</td></tr>";

          $("#myTable tfoot").append(pagination);

          // Menambahkan kelas "active" pada tombol halaman saat ini
          $(
            '#myTable tfoot .page-btn[data-page="' + currentPage + '"]'
          ).addClass("active");
        }

        function searchTableData(keyword) {
          var filteredData = data.filter(function (item) {
            var nama = item.nama.toLowerCase();
            var umur = item.umur.toString();
            var kota = item.kota.toLowerCase();
            return (
              nama.includes(keyword.toLowerCase()) ||
              umur.includes(keyword.toLowerCase()) ||
              kota.includes(keyword.toLowerCase())
            );
          });

          // Memperbarui data tabel dengan hasil pencarian
          data = filteredData;
          currentPage = 1;
          displayTableData();
        }

        function printTable() {
          // Salin tabel ke dalam elemen baru dengan kelas "print-table"
          var tfootOrigin = document.querySelector("#myTable tfoot").innerHTML;
          $("#myTable tfoot").empty();
          var $printTable = $("#myTable").clone().addClass("print-table");

          // Buat jendela cetakan baru dan masukkan tabel ke dalamnya
          var $printWindow = window.open("", "_blank");
          $printWindow.document.open();
          $printWindow.document.write(
            "<html><head><title>Tabel Cetak</title></head><body></body></html>"
          );
          $printWindow.document.body.appendChild($printTable[0]);
          $printWindow.document.close();

          $("#myTable tfoot").append(tfootOrigin);

          // Cetak jendela cetakan baru
          $printWindow.print();
        }

        // Memanggil fungsi untuk menampilkan data awal
        displayTableData();

        // Memanggil fungsi untuk menampilkan data ketika tombol halaman di klik
        $(document).on("click", "#myTable .page-btn", function () {
          currentPage = parseInt($(this).attr("data-page"));
          displayTableData();
        });

        // Memanggil fungsi pencarian saat pengguna memasukkan teks pada input pencarian
        $(document).on("input", "#searchInput", function () {
          var keyword = $(this).val();
          searchTableData(keyword);
        });

        // Memanggil fungsi pencetakan saat tombol cetak diklik
        $(document).on("click", "#printBtn", function () {
          printTable();
        });
      });
    </script>
  </body>
</html>
